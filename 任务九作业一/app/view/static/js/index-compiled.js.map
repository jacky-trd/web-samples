{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["/**\r\n * Created by Administrator on 2017/4/27 0027.\r\n */\r\n$(function () {\r\n\r\n    /*\r\n     * 回到顶部\r\n     */\r\n    (function () {\r\n        var top = $('#goTop');\r\n        top.hide();\r\n        $(window).scroll(throttle(function () {\r\n            if ($(this).scrollTop() <= 10) {\r\n                top.fadeOut(500);\r\n            } else {\r\n                top.fadeIn(500);\r\n            }\r\n        }));\r\n        top.click(function () {\r\n            if ($(window).scrollTop() <= 10) {\r\n                return false;\r\n            }\r\n            $(\"body,html\").animate({\r\n                scrollTop: 0\r\n            }, 200);\r\n            return false;\r\n        });\r\n    })();\r\n\r\n    /*\r\n     * 动态计算标签长度\r\n     * */\r\n    (function () {\r\n        $('#navLinks').find('a').each(function () {\r\n            if ($(this).html().length > 2) {\r\n                $(this).parent().width((1 / 3 * 100) + '%');\r\n            } else {\r\n                $(this).parent().width((1 / 6 * 100) + '%');\r\n            }\r\n        });\r\n    })();\r\n\r\n    /**\r\n     * ajax的基本设置\r\n     */\r\n    $.ajaxSetup({\r\n        beforeSend: function () {\r\n            $('body').append('<div class=\"spinner\"></div>');\r\n        },\r\n        complete: function () {\r\n            $('.spinner').remove();\r\n        }\r\n    });\r\n\r\n    /*\r\n     * 查询数据对象\r\n     * */\r\n    var QueryData = {\r\n        INIT_PAGE: 0,\r\n        currentPage: 0,\r\n        type: 0,\r\n        empty: null,\r\n        target: $('#main'),\r\n        load: function (type, pageNumber) {\r\n\r\n            /**\r\n             * 当某个列表数据没有数据时不再发起这个类别的请求\r\n             */\r\n            if (this.empty === type) {\r\n                return;\r\n            }\r\n\r\n            this.currentPage = (typeof pageNumber === 'undefined') ? ++this.currentPage : pageNumber;\r\n            this.type = (typeof type === 'undefined') ? this.type : type;\r\n            var that = this;\r\n\r\n            $.get('/queryData', {\r\n                type: this.type,\r\n                pageNumber: this.currentPage\r\n            }).done(function (data) {\r\n                var empty = '<p class=\"empty\">没有更多数据了！</p>';\r\n                if (data.length === 0) {\r\n                    that.empty = type;\r\n                    that.target.append(empty);\r\n                    return;\r\n                }\r\n\r\n                var html = that.render(data);\r\n\r\n                if (data.length < 10) {\r\n                    that.empty = type;\r\n                    html.push(empty);\r\n                }\r\n\r\n                if (parseInt(pageNumber) === that.INIT_PAGE) {\r\n                    that.target.html(html);\r\n                } else {\r\n                    that.target.append(html);\r\n                }\r\n\r\n            }).fail(function (err) {\r\n                console.log(err);\r\n            });\r\n        },\r\n        render: function (data) {\r\n            return $.map(data, function (item) {\r\n                var itemWrap = $('<div class=\"item\"></div>');\r\n                var img = $('<img class=\"item-img\">').attr('src', item.imgSrc);\r\n                var content = $('<div class=\"item-content\"></div>');\r\n                var h3 = $('<h3 class=\"item-title\"></h3>').text(item.title);\r\n                var foot = $('<div><span class=\"item-date\">' + item.date + '</span><span class=\"item-from\">' + item.from + '</span></div>');\r\n                content.append(h3).append(foot);\r\n                itemWrap.append(img).append(content);\r\n                return itemWrap;\r\n            });\r\n        }\r\n    };\r\n\r\n    /*\r\n     * 获取首屏数据\r\n     * */\r\n    QueryData.load(0, 0);\r\n\r\n    /*\r\n     * 查询对应新闻\r\n     * */\r\n    $('[data-type]').click(function () {\r\n        $(this).addClass('active').siblings('.active').removeClass('active');\r\n        QueryData.load($(this).data('type'), 0);\r\n    });\r\n\r\n    /*\r\n     * 滚动监听\r\n     * */\r\n    $(window).scroll(throttle(function () {\r\n        var scrollTop = $(this).scrollTop();\r\n        var scrollHeight = $(document).height();\r\n        var windowHeight = $(this).height();\r\n        if (scrollTop + windowHeight === scrollHeight) {\r\n            QueryData.load(QueryData.type);\r\n        }\r\n    }));\r\n});\r\n"]}